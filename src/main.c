#include <stdlib.h>
#include <stdio.h>

#include "parser.h"

const char req[] ={
        0x01, 0x63, 0x01, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x01, 0x05, 0x61, 0x6c, 0x69, 0x76,
        0x65, 0x06, 0x67, 0x69, 0x74, 0x68, 0x75, 0x62,
        0x03, 0x63, 0x6f, 0x6d, 0x00, 0x00, 0x1c, 0x00,
        0x01, 0x00, 0x00, 0x29, 0x05, 0xc0, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00
};

const char resp[] ={0xc0};

int main(int argc, char **argv)
{
    dns_msg_t *dns = malloc(sizeof(dns_msg_t));

    uint32_t offset = 0;
    dns_header_parser(req, &offset, dns);
//    print_dns_header(dns);
    dns_rr_parser(req, &offset, dns);

    printf("Name: %s",dns->question->name);
//    dns_header_t *header;
//    dns_parser(0, &dns_header, pload);

//    printf("TransactionId : %04x", ntohs(dns_header.id));
    return 0;
}